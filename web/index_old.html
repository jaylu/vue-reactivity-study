<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="./lib/lodash.min.js"></script>
    <script src="./lib/vue.global.js"></script>
    <script src="./main.js"></script>
    <title>Demo</title>
    <style>
        #app {
            font-size: 46px;
        }
    </style>
</head>

<body>

    <script type="text/x-template" id="name-card">
        <div> first name: {{firstName}} </div>
        <div> last name: {{lastName}} </div>
    </script>    

    <div id="app"></div>

    <script type="text/x-template" id="app-template">
        <div>
            <div>red: {{red}}</div>
            <div>blue: {{blue}}</div>
            <div>total: {{total}}</div>
        </div>
    </script>

    <script>

        let model = {
            red: 3,
            blue: 4,
            total: 7
        }

        let template = document.querySelector('#app-template').innerHTML

        function render() {
            document.querySelector('#app').innerHTML = compile(template, model)
        }

        setInterval((params) => {
            model.red = _.random(1, 10)
            model.blue = _.random(1, 10)
            model.total = model.red + model.blue
            console.log(`model updated: ${JSON.stringify(model, null, 4)}`);
        }, 2000)

        render()
        setInterval(() => {render()}, 1000)

    </script>
</body>

</html>